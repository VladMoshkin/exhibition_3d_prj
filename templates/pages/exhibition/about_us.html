{% extends "base/base.html" %}
{% load staticfiles i18n %}
{% block title %}Выставки{% endblock %}


{% block content %}
	  <script src="{% static 'js/three.js' %}"></script>
		<script src="{% static 'js/OrbitControls.js' %}"></script>
		<script src="{% static 'js/physi.js' %}"></script>
		<script>

			Physijs.scripts.worker = "{% static 'js/physijs_worker.js' %}";
			Physijs.scripts.ammo = "{% static 'js/ammo.js' %}";

      var camera, scene, renderer;
      var cube_texture, loader;

      init( );
      animation( );


      function init( ){

					window.addEventListener('resize', onResize, false);

				  camera = new THREE.PerspectiveCamera( 60, window.innerWidth/window.innerHeight, 0.01, 1000 );
          camera.position.set( 0, 0, 625 );
			    camera.setFocalLength ( 40 );

					scene = new Physijs.Scene();
          scene.background = new THREE.Color(0xffffff);
					scene.setGravity ( new THREE.Vector3( 0, -20, 0 ) );
					//cube


					//Plane hor
					var planeMaterials = Physijs.createMaterial (
						new THREE.MeshBasicMaterial( { color:0xffffff } ),
						0.3, // friction
						1    // restitution
					);

					var geometry = new THREE.BoxGeometry( 1300, 1000, 1 );
          var plane = new Physijs.BoxMesh( geometry, planeMaterials );
          scene.add( plane );
          plane.position.set(350, -50.2, 0);
          plane.rotation.x = -Math.PI / 2;

          //line hor
					var geometry = new THREE.Geometry();
					geometry.vertices.push(
						new THREE.Vector3( -400, -40, -250 ),
						new THREE.Vector3( 1200,-40, -250 )
					);
					var line = new THREE.Line( geometry, new THREE.LineBasicMaterial( { color: 0x000000, linewidth: 2 } ) );
					scene.add(line);

					//Light
          var ambientLight = new THREE.AmbientLight( 0xFFFFFF, 1 );
          scene.add( ambientLight );

          renderer = new THREE.WebGLRenderer({ antialias: true });
          renderer.setSize( window.innerWidth, window.innerHeight );
          renderer.shadowMap.enabled = true;
			    renderer.shadowMapSoft = true;
          document.body.appendChild( renderer.domElement );

					scene.add ( camera );
					/* controls
					controls = new THREE.OrbitControls( camera, renderer.domElement );
					*/
      }

			function onResize() {
  				camera.aspect = window.innerWidth / window.innerHeight;
  				camera.updateProjectionMatrix();
  				renderer.setSize(window.innerWidth, window.innerHeight);
			}

      function animation( ){
          requestAnimationFrame( animation );
					//controls.update()
          renderer.render( scene, camera );
      }

		</script>
{% endblock %}
